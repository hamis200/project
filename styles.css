document.addEventListener('DOMContentLoaded', function () {
  const form = document.getElementById('orderForm');
  const quoteSummary = document.getElementById('quote-summary');
  const totalPriceEl = document.getElementById('total-price');
  const quantityInputs = document.querySelectorAll('.quantity-input');
  const eventTypeSelect = document.getElementById('eventType');
  const otherEvent = document.getElementById('otherEvent');

  let totalPrice = 0;

  // Event Listener for showing "Other" input when needed
  eventTypeSelect.addEventListener('change', function () {
    if (eventTypeSelect.value === 'other') {
      otherEvent.classList.remove('hidden');
    } else {
      otherEvent.classList.add('hidden');
    }
  });

  // Function to update the quote summary and total price
  function updateSummary() {
    let summaryHTML = '';
    totalPrice = 0;

    quantityInputs.forEach(input => {
      const quantity = input.value;
      const price = parseFloat(input.getAttribute('data-price'));
      if (quantity > 0) {
        const itemTotal = quantity * price;
        totalPrice += itemTotal;
        summaryHTML += `<p>${quantity} x ${input.previousElementSibling.previousElementSibling.innerHTML}: â‚¬${itemTotal.toFixed(2)}</p>`;
      }
    });

    quoteSummary.innerHTML = summaryHTML || '<p>No items selected.</p>';
    totalPriceEl.textContent = totalPrice.toFixed(2);
  }

  // Add event listeners to update the summary when quantity changes
  quantityInputs.forEach(input => {
    input.addEventListener('input', updateSummary);
  });

  // Form submission with Netlify
  form.addEventListener('submit', function (e) {
    e.preventDefault();

    const formData = new FormData(form);
    alert("Thank you for submitting your order. We will contact you shortly!");

    form.reset();
    updateSummary(); // Reset summary
  });
});
